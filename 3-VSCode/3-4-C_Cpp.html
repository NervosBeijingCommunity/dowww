<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C/C++ | Dev on Windows with WSL</title>
    <meta name="description" content="在 Windows 上用 WSL 优雅开发">
    <link rel="icon" href="/dowww/favicon.png">
  <meta name="theme-color" content="#00ABE9">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/dowww/favicon.png">
  <meta name="msapplication-TileImage" content="/favicon.png">
  <meta name="msapplication-TileColor" content="#06BDFF">
    
    <link rel="preload" href="/dowww/assets/css/0.styles.7bff7281.css" as="style"><link rel="preload" href="/dowww/assets/js/app.8d331449.js" as="script"><link rel="preload" href="/dowww/assets/js/11.8e90aa64.js" as="script"><link rel="preload" href="/dowww/assets/js/2.38d10980.js" as="script"><link rel="prefetch" href="/dowww/assets/js/10.ff5621ec.js"><link rel="prefetch" href="/dowww/assets/js/12.91bee4c8.js"><link rel="prefetch" href="/dowww/assets/js/13.f3bea46d.js"><link rel="prefetch" href="/dowww/assets/js/14.1a6682b2.js"><link rel="prefetch" href="/dowww/assets/js/15.ca394176.js"><link rel="prefetch" href="/dowww/assets/js/16.2c5b9115.js"><link rel="prefetch" href="/dowww/assets/js/17.5343a867.js"><link rel="prefetch" href="/dowww/assets/js/18.2c556d2a.js"><link rel="prefetch" href="/dowww/assets/js/19.7ef2f32c.js"><link rel="prefetch" href="/dowww/assets/js/20.11acf345.js"><link rel="prefetch" href="/dowww/assets/js/21.879ab712.js"><link rel="prefetch" href="/dowww/assets/js/22.0563f9f0.js"><link rel="prefetch" href="/dowww/assets/js/3.6757e927.js"><link rel="prefetch" href="/dowww/assets/js/4.42e49573.js"><link rel="prefetch" href="/dowww/assets/js/5.b647bf64.js"><link rel="prefetch" href="/dowww/assets/js/6.d186c28b.js"><link rel="prefetch" href="/dowww/assets/js/7.c803d093.js"><link rel="prefetch" href="/dowww/assets/js/8.ca0a9c3d.js"><link rel="prefetch" href="/dowww/assets/js/9.b32ad7e0.js">
    <link rel="stylesheet" href="/dowww/assets/css/0.styles.7bff7281.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dowww/" class="home-link router-link-active"><!----> <span class="site-name">Dev on Windows with WSL</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dowww/1-Preparations/" class="nav-link">准备工作</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具链</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dowww/2-Toolchain/" class="nav-link">概要</a></li><li class="dropdown-item"><!----> <a href="/dowww/2-Toolchain/2-1-TerminalEnv.html" class="nav-link">终端环境</a></li><li class="dropdown-item"><!----> <a href="/dowww/2-Toolchain/2-2-DevTools.html" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Visual Studio Code</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/" class="nav-link router-link-active">概要</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-0-Terminal.html" class="nav-link">集成终端</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-1-Git.html" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-2-Code-Runner.html" class="nav-link">Code Runner</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-3-Python.html" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-4-C_Cpp.html" class="nav-link router-link-exact-active router-link-active">C/C++</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-5-LaTeX.html" class="nav-link">LaTeX</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-6-NodeJS.html" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-7-DotNetCore.html" class="nav-link">.Net Core</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/HelpNeeded.html" class="nav-link">帮助完善</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">高阶操作</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dowww/4-Advanced/" class="nav-link">概要</a></li><li class="dropdown-item"><!----> <a href="/dowww/4-Advanced/4-1-GUI.html" class="nav-link">GUI</a></li><li class="dropdown-item"><!----> <a href="/dowww/4-Advanced/4-2-LxRunOffline.html" class="nav-link">LxRunOffline</a></li></ul></div></div><div class="nav-item"><a href="/dowww/5-Experience/" class="nav-link">体验与参考</a></div><div class="nav-item"><a href="https://github.com/spencerwooo/dowww/issues/new/choose" target="_blank" rel="noopener noreferrer" class="nav-link external">
  反馈
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/spencerwooo/dowww" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dowww/1-Preparations/" class="nav-link">准备工作</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具链</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dowww/2-Toolchain/" class="nav-link">概要</a></li><li class="dropdown-item"><!----> <a href="/dowww/2-Toolchain/2-1-TerminalEnv.html" class="nav-link">终端环境</a></li><li class="dropdown-item"><!----> <a href="/dowww/2-Toolchain/2-2-DevTools.html" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Visual Studio Code</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/" class="nav-link router-link-active">概要</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-0-Terminal.html" class="nav-link">集成终端</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-1-Git.html" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-2-Code-Runner.html" class="nav-link">Code Runner</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-3-Python.html" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-4-C_Cpp.html" class="nav-link router-link-exact-active router-link-active">C/C++</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-5-LaTeX.html" class="nav-link">LaTeX</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-6-NodeJS.html" class="nav-link">Node.js</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/3-7-DotNetCore.html" class="nav-link">.Net Core</a></li><li class="dropdown-item"><!----> <a href="/dowww/3-VSCode/HelpNeeded.html" class="nav-link">帮助完善</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">高阶操作</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dowww/4-Advanced/" class="nav-link">概要</a></li><li class="dropdown-item"><!----> <a href="/dowww/4-Advanced/4-1-GUI.html" class="nav-link">GUI</a></li><li class="dropdown-item"><!----> <a href="/dowww/4-Advanced/4-2-LxRunOffline.html" class="nav-link">LxRunOffline</a></li></ul></div></div><div class="nav-item"><a href="/dowww/5-Experience/" class="nav-link">体验与参考</a></div><div class="nav-item"><a href="https://github.com/spencerwooo/dowww/issues/new/choose" target="_blank" rel="noopener noreferrer" class="nav-link external">
  反馈
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/spencerwooo/dowww" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/dowww/3-VSCode/" class="sidebar-link">Visual Studio Code</a></li><li><a href="/dowww/3-VSCode/3-0-Terminal.html" class="sidebar-link">集成终端使用 WSL</a></li><li><a href="/dowww/3-VSCode/3-1-Git.html" class="sidebar-link">Git</a></li><li><a href="/dowww/3-VSCode/3-2-Code-Runner.html" class="sidebar-link">Code Runner</a></li><li><a href="/dowww/3-VSCode/3-3-Python.html" class="sidebar-link">Python</a></li><li><a href="/dowww/3-VSCode/3-4-C_Cpp.html" class="active sidebar-link">C/C++</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#在-visual-studio-code-中安装-c-c-插件" class="sidebar-link">在 Visual Studio Code 中安装 C/C++ 插件</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#在-wsl-侧安装-c-c-编译调试所需组件" class="sidebar-link">在 WSL 侧安装 C/C++ 编译调试所需组件</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#配置-vscode-使用-wsl-侧的-c-c-环境-intellisense" class="sidebar-link">配置 VSCode 使用 WSL 侧的 C/C++ 环境 Intellisense</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#文件结构" class="sidebar-link">文件结构</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#一键编译运行" class="sidebar-link">一键编译运行</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#调试" class="sidebar-link">调试</a></li><li class="sidebar-sub-header"><a href="/dowww/3-VSCode/3-4-C_Cpp.html#tip：更好更方便的输入输出方式" class="sidebar-link">Tip：更好更方便的输入输出方式</a></li></ul></li><li><a href="/dowww/3-VSCode/3-5-LaTeX.html" class="sidebar-link">LaTeX</a></li><li><a href="/dowww/3-VSCode/3-6-NodeJS.html" class="sidebar-link">Node.js</a></li><li><a href="/dowww/3-VSCode/3-7-DotNetCore.html" class="sidebar-link">.Net Core</a></li><li><a href="/dowww/3-VSCode/HelpNeeded.html" class="sidebar-link">参与贡献</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="c-c"><a href="#c-c" aria-hidden="true" class="header-anchor">#</a> C/C++ <a href="https://github.com/spencerwooo"><span class="badge tip middle" data-v-099ab69c>@SpencerWoo</span></a></h1> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>目前来看利用 WSL 中的 <code>gcc/g++/gdb</code> 来调试我们的 C/C++ 的<strong>单个程序</strong>应该是比较完善的了。详细的由微软 Visual Studio Code 团队与官方 CppTools 插件团队维护的文档位于这里 &gt; <a href="https://github.com/Microsoft/vscode-cpptools/blob/master/Documentation/Debugger/gdb/Windows%20Subsystem%20for%20Linux.md" target="_blank" rel="noopener noreferrer">vscode-cpptools | <code>gdb</code> on Windows Subsystem for Linux.md
<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>如果涉及到巨大的 C/C++ 项目，我更加推荐利用 Visual Studio 直接项目开发，或通过 SSH 链接到 WSL 系统进行编译调试，感谢即刻的同学给我提供的思路。</p></div> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>经过本章的配置，你的开发工程流应该是这样的：</p> <p><img src="https://i.loli.net/2019/01/01/5c2ad015eb6d7.png" alt></p> <ul><li>在代码工作区编写代码</li> <li>在输入、输出框区域配置输入与输出</li> <li>在集成终端中编译代码</li></ul> <p>除了介绍如何将 Visual Studio Code 与 WSL 中的 C/C++ 组件更紧密结合，我还将介绍如何更高效的编写调试 C/C++ 代码，力求让刚接触 C/C++ 语言的同学更有头绪。具体的配色与图标方案，在这里我安置了一些参考 &gt; <a href="/dowww/3-VSCode/#参考配置">VSCode 参考配置</a>。</p> <h2 id="在-visual-studio-code-中安装-c-c-插件"><a href="#在-visual-studio-code-中安装-c-c-插件" aria-hidden="true" class="header-anchor">#</a> 在 Visual Studio Code 中安装 C/C++ 插件</h2> <p>下载安装 Visual Studio Code 官方 C/C++ 插件：<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools" target="_blank" rel="noopener noreferrer">VSCode CppTools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="在-wsl-侧安装-c-c-编译调试所需组件"><a href="#在-wsl-侧安装-c-c-编译调试所需组件" aria-hidden="true" class="header-anchor">#</a> 在 WSL 侧安装 C/C++ 编译调试所需组件</h2> <ol><li><p>下载安装包含大部分开发所需组件的 build-essential：<code>sudo apt install build-essential</code></p></li> <li><p>为了确保安装了编译 C/C++ 的组件，运行：<code>sudo apt install gcc g++ gdb</code></p></li> <li><p>再次确认安装状态：</p> <ul><li>运行：<code>gcc --version</code> 与 <code>g++ --version</code>：</li></ul> <p><img src="https://i.loli.net/2019/01/01/5c2ad07c722b9.png" alt></p> <p>这样我们的 C/C++ 编译环境就安装成功了。</p> <ul><li>运行：<code>gdb --version</code>：</li></ul> <p><img src="https://i.loli.net/2019/01/01/5c2ad09f6eb99.png" alt></p> <p>这样我们的 C/C++ 调试环境就安装成功了。</p></li></ol> <h2 id="配置-vscode-使用-wsl-侧的-c-c-环境-intellisense"><a href="#配置-vscode-使用-wsl-侧的-c-c-环境-intellisense" aria-hidden="true" class="header-anchor">#</a> 配置 VSCode 使用 WSL 侧的 C/C++ 环境 Intellisense</h2> <p>快捷键 <code>Ctrl + Shift + P</code> 打开 Command Palette，输入 C/Cpp: Select a configuration，选择新建，并在生成的 <code>.vscode/c_cpp_properties.json</code> 中加入下面内容：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Win32&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;includePath&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;${workspaceFolder}/**&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;defines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;_DEBUG&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;UNICODE&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;_UNICODE&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;intelliSenseMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;msvc-x64&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WSL&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;intelliSenseMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gcc-x64&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;compilerPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/usr/bin/gcc&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;includePath&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;${workspaceFolder}/**&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;defines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cStandard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c11&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cppStandard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c++17&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre></div><p>两个 Configurations 分别是 Win32（即 Windows 侧）的工具链和 WSL 侧的工具链的环境配置。之后再 <code>Ctrl + Shift + P</code> 唤出 Command Palette，在“C/Cpp: Select a configuration”下选择 WSL 即可使用 WSL 环境进行配置 Intellisense、调试等等功能了。</p> <h2 id="文件结构"><a href="#文件结构" aria-hidden="true" class="header-anchor">#</a> 文件结构</h2> <p>一个我个人比较推荐的 C/C++ 的文件结构是这样的：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">.</span>
├── .vscode
│   ├── launch.json
│   ├── settings.json
│   └── tasks.json
├── Hello.cpp <span class="token punctuation">(</span>or Hello.c<span class="token punctuation">)</span>
├── a.out
├── in.txt
└── out.txt
</code></pre></div><p>其中：</p> <blockquote><p>🔴 必要、🔵 可选、🔷 自动生成。</p></blockquote> <table><thead><tr><th>属性</th> <th>文件用途</th></tr></thead> <tbody><tr><td>🔴</td> <td><code>.vscode/</code> 文件夹下面安置 VSCode 调试所需的配置文件</td></tr> <tr><td>🔴</td> <td><code>Hello.cpp</code> 是主 C++ 文件（相应的，<code>Hello.c</code> 是主 C 文件）</td></tr> <tr><td>🔵</td> <td><code>in.txt</code> 和 <code>out.txt</code> 是 C/C++ 程序的输入输出文件，我相信经历过 ACM 培训的同学会理解为什么要单独配置这两个文件，主要原因在于有时候输入内容太庞大复制粘贴有时候会出现格式问题，配置输入输出文件更加有利开发</td></tr> <tr><td>🔷</td> <td><code>a.out</code> 是编译之后 C/C++ 程序的可执行文件，由编译器自动生成</td></tr></tbody></table> <p>当然一个文件夹下可以放置多个 C/C++ 文件，不会影响正常调试与开发。</p> <h2 id="一键编译运行"><a href="#一键编译运行" aria-hidden="true" class="header-anchor">#</a> 一键编译运行</h2> <blockquote><p>基础配置详见 &gt; <a href="/dowww/3-VSCode/3-2-Code-Runner.html">Code Runner</a></p></blockquote> <p>大多数情况下我们可以直接利用之前安装的 Code Runner 插件进行编译运行 C/C++ 程序。</p> <p>首先配置一下 Code Runner 插件，在用户设置中添加如下内容：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;code-runner.executorMap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;c&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd $dir &amp;&amp; gcc $fileNameWithoutExt.c &amp;&amp; ./a.out&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cpp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd $dir &amp;&amp; g++ $fileNameWithoutExt.cpp &amp;&amp; ./a.out&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，具体编译的部分命令是 <code>gcc $文件名.c</code>，编译出来的可执行文件为 <code>a.out</code>，运行可执行文件的命令为 <code>./a.out</code>，通过 Code Runner 插件我们实际上就是自动化了这一过程，一键编译。经过这样的配置，在代码工作区右键选择 <code>Run Code</code>、在 Command Palette (<code>Ctrl + Shift + P</code>) 输入 Run Code、或者直接快捷键 <code>Ctrl + Alt + N</code>，就可以编译执行代码了。<strong>输入等其他与程序进行交互的部分位于终端区域。</strong></p> <p>当然，如果你希望自定义可执行文件的名字，也可以将编译部分的命令更改为 <code>gcc -o $fileNameWithoutExt $fileNameWithoutExt.c</code>（以 C 语言程序为例），这样编译出来的可执行文件名称就是 <code>$fileNameWithoutExt</code>。（其中 <code>$fileNameWithoutExt</code> 是一个宏，代指 C/C++ 程序文件名。）</p> <h2 id="调试"><a href="#调试" aria-hidden="true" class="header-anchor">#</a> 调试</h2> <p>Visual Studio Code 有着其他编辑器无法比拟的调试功能。强大到令人发指。</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>本部分默认你已经按照上面文件系统创建了 <code>.vscode</code> 文件夹和 <code>xxx.c</code> or <code>xxx.cpp</code> 程序。</p></div> <p>首先在 <code>.vscode</code> 文件夹下创建 <code>launch.json</code> 和 <code>task.json</code>，分别加入如下内容：</p> <h3 id="launch-json"><a href="#launch-json" aria-hidden="true" class="header-anchor">#</a> <code>launch.json</code></h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    // launch.json
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information<span class="token punctuation">,</span> visit<span class="token operator">:</span> https<span class="token operator">:</span>//go.microsoft.com/fwlink/?linkid=<span class="token number">830387</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(gdb) Launch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cppdbg&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$工作区文件夹路径/a.out&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;-fThreading&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;stopAtEntry&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$工作区文件夹路径&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;environment&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;externalConsole&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;MIMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gdb&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;setupCommands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Enable pretty-printing for gdb&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;-enable-pretty-printing&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;ignoreFailures&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;pipeTransport&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;pipeCwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;pipeProgram&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c:\\windows\\sysnative\\bash.exe&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;pipeArgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;-c&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;debuggerPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/usr/bin/gdb&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sourceFileMap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;/mnt/c&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c:\\&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;preLaunchTask&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Compile&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="tasks-json"><a href="#tasks-json" aria-hidden="true" class="header-anchor">#</a> <code>tasks.json</code></h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    // tasks.json
    // See https<span class="token operator">:</span>//go.microsoft.com/fwlink/?LinkId=<span class="token number">733558</span>
    // for the documentation about the tasks.json format
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tasks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Compile&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;g++&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;-g&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;-Wall&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;-std=c++17&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;$工作区文件夹路径/${fileBasename}&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;problemMatcher&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cpp&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;fileLocation&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;relative&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;${workspaceRoot}&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;pattern&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;regexp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;line&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;column&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                <span class="token property">&quot;severity&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
                <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token number">5</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;shell&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;isDefault&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;presentation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;echo&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;reveal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;focus&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;panel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;shared&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="配置上述两个文件"><a href="#配置上述两个文件" aria-hidden="true" class="header-anchor">#</a> 配置上述两个文件</h3> <ol><li>修改两个文件中的 <code>$工作区文件夹路径</code> 为你自己的具体文件路径，路径可以通过在终端执行 <code>pwd</code> 获取：</li></ol> <p><img src="https://i.loli.net/2019/01/01/5c2ad10d409d9.png" alt></p> <ol start="2"><li>可以看到，在 <code>launch.json</code> 中的 <code>pipeTransport</code> 属性就是 C/C++ 插件对 WSL 进行的适配，通过一个 wslBridge 来让 Windows 端调试能够链接到 WSL 中的可执行文件。</li></ol> <p>调试通过快捷键 <code>F5</code> 执行，经过如上配置，进入调试的界面应该如下：</p> <p><img src="https://i.loli.net/2018/10/18/5bc876d88afe4.png" alt></p> <h2 id="tip：更好更方便的输入输出方式"><a href="#tip：更好更方便的输入输出方式" aria-hidden="true" class="header-anchor">#</a> Tip：更好更方便的输入输出方式</h2> <p>为了更方便的处理庞大的格式化输入，在 C/C++ 中我们可以通过这样的代码片段来读取输入：<code>in.txt</code> 并将程序输出、程序运行时间写入文件：<code>out.txt</code>。这段代码是这样的：</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">ifdef</span> SUBMIT</span>
<span class="token function">freopen</span><span class="token punctuation">(</span><span class="token string">&quot;in.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">freopen</span><span class="token punctuation">(</span><span class="token string">&quot;out.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span> <span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> _begin_time <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>

<span class="token comment">/* your code here */</span>

<span class="token macro property">#<span class="token directive keyword">ifdef</span> SUBMIT</span>
<span class="token keyword">long</span> _end_time <span class="token operator">=</span> <span class="token function">clock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;time = %ld ms&quot;</span><span class="token punctuation">,</span> _end_time <span class="token operator">-</span> _begin_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
</code></pre></div><p>同时要在头文件定义时加入：</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">define</span> SUBMIT </span><span class="token comment">//本地运行这行留下，提交代码直接注释掉</span>
</code></pre></div><p>Visual Studio Code 支持用户自定义代码片段，访问这里直接获取为 VSCode 生成的代码片段设置 &gt; <a href="https://snippet-generator.app/?description=C%2FC%2B%2B+Input+%26+Output&tabtrigger=inputoutput&snippet=%23ifdef+SUBMIT%0Afreopen%28%22in.txt%22%2C+%22r%22%2C+stdin%29%3B%0Afreopen%28%22out.txt%22%2C+%22w%22%2C+stdout%29%3B%0Along+_begin_time+%3D+clock%28%29%3B%0A%23endif%0A%0A%24%7B1%3AYour+Code+Here.%7D%0A%0A%23ifdef+SUBMIT%0Along+_end_time+%3D+clock%28%29%3B%0Aprintf%28%22time+%3D+%25ld+ms%22%2C+_end_time+-+_begin_time%29%3B%0A%23endif&mode=vscode" target="_blank" rel="noopener noreferrer">Snippet Generator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，然后在左下角设置 &gt; User Snippets 中添加这个代码片段，之后只需输入 <code>inputoutput</code> 就可以自动补全了。</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/24/2019, 12:27:07 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/dowww/3-VSCode/3-3-Python.html" class="prev">
          Python
        </a></span> <span class="next"><a href="/dowww/3-VSCode/3-5-LaTeX.html">
          LaTeX
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/dowww/assets/js/app.8d331449.js" defer></script><script src="/dowww/assets/js/11.8e90aa64.js" defer></script><script src="/dowww/assets/js/2.38d10980.js" defer></script>
  </body>
</html>
